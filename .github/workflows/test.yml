name: Run Tests

on:
 pull_request:
   branches:
     - master

jobs:
 test:
   strategy:
     matrix:
       # see DEVELOPMENT.md for information why we're using this specific combination
       # of JDKs to run unit tests on
       java-version: ["adopt@1.8.0-242", "amazon-corretto@1.11.0-6.10.1", "1.13.0"]
   runs-on: ubuntu-18.04
   steps:
   - name: Install Java
     # the setup-scala action is the only available action that allows us to access
     # https://github.com/shyiko/jabba - a tool that can install various JDKs
     # NOTE: when upstream releases version 8, we can change this to:
     # uses: olafurpg/setup-scala@v8
     uses: bkabrda/setup-scala@0af3a8259815032a2604ba25c4df5ab0b9591e8f
     with:
       java-version: ${{ matrix.java-version }}
       jabba-version: 0.11.2
   - name: Checkout code
     uses: actions/checkout@v2
   - name: Test
     run: ./run-tests.sh
