{% include "ApiInfo.j2" %}
package {{ common_package_name }};

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import com.github.luben.zstd.ZstdInputStream;
import com.github.luben.zstd.ZstdOutputStream;

import javax.annotation.Priority;
import javax.ws.rs.Priorities;

import org.glassfish.jersey.spi.ContentEncoder;

/**
 * Zstd encoding support
 */
@Priority(Priorities.ENTITY_CODER)
public class ZstdEncoder extends ContentEncoder {
  public ZstdEncoder() {
    super("zstd", "zstd1");
  }

  @Override
  public InputStream decode(String contentEncoding, InputStream encodedStream)
      throws IOException {
    return new ZstdInputStream(encodedStream);
  }

  @Override
  public OutputStream encode(String contentEncoding, OutputStream entityStream)
      throws IOException {
    return new ZstdOutputStream(entityStream);
  }
}
